C51 COMPILER V9.00   A_LL1FUNC                                                             07/26/2017 18:44:54 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE A_LL1FUNC
OBJECT MODULE PLACED IN a_ll1func.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE a_ll1func.c LARGE BROWSE DEBUG OBJECTEXTEND

line level    source

   1          
   2          //2017-01-13
   3          
   4          //#include "reg52.h"
   5          #include "a_ll1func.h"
   6          
   7          
   8          
   9          
  10          struct ll1_ws_t  ll1_ws0;
  11          
  12          struct ll1_ws_t *ll1_pws = &ll1_ws0;
  13          
  14          
  15          #define    t   ll1_pws
  16          
  17          
  18          
  19          /*------------------------------------------------
  20            
  21          ------------------------------------------------*/
  22          #if 1
  23          void ll1_reset( unsigned char * psenbuf , unsigned int senbuflen )
  24          {
  25   1              ll1_pws = &ll1_ws0;
  26   1      
  27   1              t->m_sen_buf = psenbuf;
  28   1              t->m_sen_buflen = senbuflen;
  29   1              t->m_sen_bufidx = 0;
  30   1              t->m_rc = 0;
  31   1              t->m_c = 0;
  32   1              t->m_stack_bufidx = 0;
  33   1      }
  34          #endif
  35          
  36          
  37          
  38          /*------------------------------------------------
  39            
  40          ------------------------------------------------*/
  41          #if 1
  42          void ll1_eat1()
  43          {   
  44   1              if( t->m_sen_bufidx >= t->m_sen_buflen )
  45   1              {
  46   2                      t->m_rc = 0;
  47   2                      t->m_c = 0;
  48   2                      return;
  49   2              }
  50   1      
  51   1              t->m_rc = 1;
  52   1              t->m_c = (t->m_sen_buf)[t->m_sen_bufidx];
  53   1              t->m_sen_bufidx++;
  54   1      }
  55          #endif
C51 COMPILER V9.00   A_LL1FUNC                                                             07/26/2017 18:44:54 PAGE 2   

  56          
  57          
  58          
  59          
  60          /*------------------------------------------------
  61            
  62          ------------------------------------------------*/
  63          #if 1
  64          void ll1_back1()
  65          {   
  66   1              if( t->m_sen_bufidx <= 0 )
  67   1              {
  68   2                      t->m_rc = 0;
  69   2                      t->m_c = 0;
  70   2                      return;
  71   2              }
  72   1      
  73   1              t->m_rc = 1;
  74   1              t->m_sen_bufidx--;
  75   1              t->m_c = (t->m_sen_buf)[t->m_sen_bufidx];
  76   1      }
  77          #endif
  78          
  79          
  80          
  81          
  82          /*------------------------------------------------
  83            
  84          ------------------------------------------------*/
  85          #if 0
              void ll1_eat_binvt( unsigned char *p, unsigned int len )
              {
                      unsigned int j;
              
                      for( j = 0; j < len; j++ )
                      {
                              ll1_eat1();
              
                              if( t->m_rc == 0 )
                              {
                                      return;
                              }
              
                              if( t->m_c != p[j] )
                              {
                                      ll1_back1();
                                      t->m_rc = 0;
                                      t->m_c = 0;
                                      return;
                              }
                      }
              }
              #endif
 109          
 110          
 111          
 112          /*------------------------------------------------
 113            
 114          ------------------------------------------------*/
 115          #if 1
 116          void ll1_eat_szvt( unsigned char *sz )
 117          {
C51 COMPILER V9.00   A_LL1FUNC                                                             07/26/2017 18:44:54 PAGE 3   

 118   1              unsigned int j;
 119   1      
 120   1              for( j = 0; sz[j]; j++ )
 121   1              {
 122   2                      //if( sz[j] == 0 ) break;
 123   2      
 124   2                      ll1_eat1();
 125   2      
 126   2                      if( t->m_rc == 0 )
 127   2                      {
 128   3                              return;
 129   3                      }
 130   2      
 131   2                      if( t->m_c != sz[j] )
 132   2                      {
 133   3                              ll1_back1();
 134   3                              t->m_rc = 0;
 135   3                              t->m_c = 0;
 136   3                              return;
 137   3                      }
 138   2              }
 139   1      }
 140          #endif
 141          
 142          
 143          
 144          
 145          /*------------------------------------------------
 146            
 147          ------------------------------------------------*/
 148          #if 1
 149          unsigned long ll1_eat_uint()
 150          {
 151   1              unsigned int j;
 152   1              unsigned long u = 0;
 153   1      
 154   1              for( j = 0; ; j++ )
 155   1              {
 156   2                      ll1_eat1();
 157   2              
 158   2                      //if( t->m_rc == 0 ) break; 因为rc为0时返回必非数字型
 159   2      
 160   2                      if( t->m_c >= '0' && t->m_c <= '9' )
 161   2                      {
 162   3                              u *= 10;
 163   3                              u += t->m_c - '0';
 164   3                      }
 165   2                      else
 166   2                      {
 167   3                              ll1_back1();
 168   3                              break;
 169   3                      }
 170   2              }
 171   1      
 172   1              return u;
 173   1      }
 174          #endif
 175          
 176          
 177          
 178          
 179          
C51 COMPILER V9.00   A_LL1FUNC                                                             07/26/2017 18:44:54 PAGE 4   

 180          /*------------------------------------------------
 181            
 182          ------------------------------------------------*/
 183          #if 0
              unsigned int ll1_eat_str_blackvt( unsigned char *blackvtset , unsigned char HaveEof ) 
              {
                      unsigned int beginindex;
                      unsigned int x;
              
                      beginindex = t->m_sen_bufidx;
              
                      for(;;)
                      {
                              ll1_eat1();
                              
                              if( t->m_rc == 0 )
                              {
                                      if( HaveEof ) t->m_rc = 1; // Eof在follow集的情况       
                                      break;  
                              }
              
                              for( x = 0; blackvtset[x]; x++ )
                              {
                                      if( t->m_c == blackvtset[x] )
                                      {
                                              ll1_back1();
                                              return beginindex;
                                      }
                              }
                      }
              
                      return beginindex;
              }
              #endif
 214          
 215          
 216          
 217          
 218          /*------------------------------------------------
 219            
 220          ------------------------------------------------*/
 221          #if 1
 222          unsigned int ll1_eat_str_whitevt( unsigned char *whitevtset ) 
 223          {
 224   1              unsigned int beginindex;
 225   1              unsigned int x;
 226   1      
 227   1              beginindex = t->m_sen_bufidx;
 228   1      
 229   1              for(;;)
 230   1              {
 231   2                      ll1_eat1();
 232   2                      
 233   2                      if( t->m_rc == 0 )
 234   2                              break;  
 235   2               
 236   2                      for( x = 0; whitevtset[x]; x++ )
 237   2                      {
 238   3                              if( t->m_c == whitevtset[x] )
 239   3                                      break;  
 240   3                      }
 241   2      
C51 COMPILER V9.00   A_LL1FUNC                                                             07/26/2017 18:44:54 PAGE 5   

 242   2                      if( whitevtset[x] == 0 )
 243   2                      {
 244   3                              ll1_back1();
 245   3                              break;
 246   3                      }
 247   2              }
 248   1      
 249   1              return beginindex;
 250   1      }
 251          #endif
 252          
 253          
 254          
 255          
 256          
 257          /*------------------------------------------------
 258            
 259          ------------------------------------------------*/
 260          #if 1
 261          void ll1_push()
 262          { 
 263   1              (t->m_stack_buf)[t->m_stack_bufidx] = t->m_sen_bufidx;
 264   1              t->m_stack_bufidx++;
 265   1      }
 266          #endif
 267          
 268          
 269          
 270          /*------------------------------------------------
 271            
 272          ------------------------------------------------*/
 273          #if 1
 274          void ll1_pop()
 275          { 
 276   1              t->m_stack_bufidx--;
 277   1              t->m_sen_bufidx = (t->m_stack_buf)[t->m_stack_bufidx];
 278   1      }
 279          #endif
 280          
 281          
 282          
 283          
 284          
 285          
 286          
 287          
 288          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    958    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     23      17
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
